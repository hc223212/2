(window.webpackJsonpvtex_product_summary_2_89_0=window.webpackJsonpvtex_product_summary_2_89_0||[]).push([["ProductSummaryCustom"],{0:function(e,t){e.exports=React},105:function(e,t,n){"use strict";n.r(t);var r=n(9),i=n(0),o=n.n(i),a=n(7),u=n.n(a),c=n(8),s=n(58),l=n.n(s),d=n(21),m=n.n(d),f=n(6),v=n.n(f),p=n(59),_=n.n(p),g=n(5),E=n.n(g),O=n(44),h=n(22),x=n(29),b=n(60),I=n.n(b),P=n(48);var y=function(e,t,n){return e.commertialOffer=Object.assign(Object.assign({},e.commertialOffer),t.commertialOffer),0===e.commertialOffer.Price&&(e.commertialOffer.AvailableQuantity=0),n?Object.assign(Object.assign({},e),{sellerDefault:e.sellerId===n}):e},C=function(e){var t=e.filter((function(e){return 0!==e.commertialOffer.AvailableQuantity}));return null==t?void 0:t.sort((function(e,t){return e.commertialOffer.Price-t.commertialOffer.Price})).map((function(e){return e.sellerId}))[0]};var N=function(e){var t=e.product,n=e.inView,r=e.onComplete,o=e.onError,a=e.priceBehavior,u=t.items||[],c=Object(i.useMemo)((function(){return"async"===a?u.map((function(e){return{itemId:e.itemId,sellers:e.sellers.map((function(e){return{sellerId:e.sellerId}}))}})):u.map((function(e){return{itemId:e.itemId,sellers:[{sellerId:"1"}]}}))}),[u,a]);Object(x.useQuery)(I.a,{variables:{items:c},skip:"default"===a||!n,ssr:!1,onError:o,onCompleted:function(e){var n;if(e){var i=e.itemsWithSimulation,o=function e(t){if(!t)return t;var n,r=Array.isArray(t)?[]:{};for(var i in t)n=t[i],r[i]="object"===Object(P.a)(n)?e(n):n;return r}(t);o.items.forEach((function(e,t){var n=i[t];if("async"===a){var r=C(n.sellers);e.sellers=e.sellers.map((function(e,t){var i=n.sellers[t];return y(e,i,r)}))}else{var o=e.sellers.findIndex((function(e){return"1"===e.sellerId})),u=Array.from(e.sellers);u[o]=n.sellers[0];var c=C(u);e.sellers=e.sellers.map((function(e){return"1"!==e.sellerId?c?Object.assign(Object.assign({},e),{sellerDefault:e.sellerId===c}):e:y(e,n.sellers[0],c)}))}})),o.sku=o.items.find((function(e){return e.itemId===o.sku.itemId})),o.sku.sellers.length>0?o.sku.seller=null!==(n=o.sku.sellers.find((function(e){return e.sellerDefault})))&&void 0!==n?n:o.sku.sellers[0]:o.sku.seller={commertialOffer:{Price:0,ListPrice:0}},o.sku.image=t.sku.image,r(o)}}})},S=n(38),R=n.n(S),T=n(61),j=n.n(T),k=v.a.useProductSummaryDispatch;var L=function(){var e,t=(null!==(e=R()())&&void 0!==e?e:{}).selectedItem,n=k(),r=j()();return function(e){var i=t&&e.items.find((function(e){return e.itemId===t.itemId}));n({type:"SET_PRODUCT",args:{product:e}}),null==r||r({type:"SET_PRODUCT",args:{product:e}}),null==r||r({type:"SET_SELECTED_ITEM",args:{item:i}})}};var D=function(e){var t=e.product,n=e.inView,r=e.children,i=e.priceBehavior,a=v.a.useProductSummaryDispatch(),u=L();return N({product:t,inView:n,priceBehavior:i,onError:function(){a({type:"SET_PRICE_LOADING",args:{isPriceLoading:!1}})},onComplete:function(e){u(e),a({type:"SET_PRICE_LOADING",args:{isPriceLoading:!1}})}}),o.a.createElement(o.a.Fragment,null,r)},w=function(e){var t,n=e.product,r=e.position;if(!(null===(t=n.advertisement)||void 0===t?void 0:t.adId))return{};var i=n.productId,o=n.productName,a=n.advertisement;return{"data-van-prod-id":i,"data-van-prod-name":o,"data-van-position":r,"data-van-aid":a.adId,"data-van-cid":a.campaignId,"data-van-req-id":a.adRequestId,"data-van-res-id":a.adResponseId,"data-van-cpc":a.actionCost}},A=n(39),M=n(32),B=n.n(M),V=["sponsoredBadgeContainer","sponsoredBadgeText"],U=function(e){var t=e.label,n=void 0===t?"store/sponsoredBadge.title":t,r=E()(V).handles,i=u()(r.sponsoredBadgeContainer,"absolute z-1"),a=u()(r.sponsoredBadgeText,"c-muted-1 t-mini-s");return o.a.createElement("div",{className:i},o.a.createElement("span",{className:a},o.a.createElement(B.a,{id:n})))},H=v.a.ProductSummaryProvider,q=v.a.useProductSummaryDispatch,Q=v.a.useProductSummary,W=["container","containerNormal","element","clearLink"];function F(e){var t,n,a=e.product,s=e.actionOnClick,d=e.children,f=e.href,v=e.priceBehavior,p=void 0===v?"default":v,g=e.position,h=e.classes,x=Q(),b=x.isLoading,I=x.isHovering,P=x.selectedItem,y=x.listName,C=x.query,N=x.inView,S=x.sponsoredBadge,R=q(),T=E()(W,{classes:h}).handles,j=m.a.useProductListDispatch(),k=m.a.useProductListState(),L="autocomplete-result-list"===(null==k?void 0:k.listName),M=Object(i.useRef)(null),B=Object(i.useCallback)((function(){null==j||j({type:"SEND_IMPRESSION",args:{product:a,position:g}}),R({type:"SET_IN_VIEW",args:{inView:!0}})}),[R,j,a,g]);l()({ref:M,once:!0,onView:B}),Object(i.useEffect)((function(){a&&R({type:"SET_PRODUCT",args:{product:a}})}),[a,R]),Object(i.useEffect)((function(){g&&R({type:"SET_POSITION",args:{position:g}})}),[g,R]);var V=Object(i.useCallback)((function(){R({type:"SET_HOVER",args:{isHovering:!1}})}),[R]),H=Object(i.useCallback)((function(){R({type:"SET_HOVER",args:{isHovering:!0}})}),[R]),F=Object(i.useCallback)((function(e){R({type:"SET_LOADING",args:{isLoading:e}})}),[R]),G=Object(i.useMemo)((function(){return{product:a,isLoading:b,isHovering:I,handleItemsStateUpdate:F}}),[a,b,I,F]),J=u()(T.container,T.containerNormal,"overflow-hidden br3 h-100 w-100 flex flex-column justify-between center tc"),z=u()(T.element,"pointer pt3 pb4 flex flex-column h-100"),K=u()(T.clearLink,"h-100 flex flex-column"),X=null!==(t=null==P?void 0:P.itemId)&&void 0!==t?t:null===(n=null==a?void 0:a.sku)||void 0===n?void 0:n.itemId,Y=f?{to:f,onClick:L?s:void 0,onClickCapture:L?void 0:s}:{page:"store.product",params:{slug:null==a?void 0:a.linkText,id:null==a?void 0:a.productId,__listName:y},query:C,onClick:L?s:void 0,onClickCapture:L?void 0:s},Z=w({product:a,position:g}),$=Object(A.a)(a,null==S?void 0:S.position,"containerTopLeft");return o.a.createElement(O.default.Provider,{value:G},o.a.createElement(_.a,{product:a,query:{skuId:X}},o.a.createElement(D,{product:a,inView:N,priceBehavior:p},o.a.createElement("section",Object(r.a)({className:J,onMouseEnter:H,onMouseLeave:V,style:{maxWidth:300},ref:M},Z),o.a.createElement(c.Link,Object(r.a)({className:K},Y),o.a.createElement("article",{className:z},$?o.a.createElement(U,{label:null==S?void 0:S.label}):null,d))))))}function G(e){var t=e.product,n=e.actionOnClick,r=e.href,i=e.priceBehavior,a=void 0===i?"default":i,u=e.trackListName,c=void 0===u||u,s=e.listName,l=e.position,d=e.sponsoredBadgePosition,m=e.sponsoredBadgeLabel,f=e.classes,v=e.children,p={position:d,label:m};return o.a.createElement(H,{product:t,listName:c?s:void 0,sponsoredBadge:p,isPriceLoading:"async"===a||"asyncOnly1P"===a},o.a.createElement(F,{product:t,href:r,actionOnClick:n,priceBehavior:a,position:l,classes:f},v))}G.schema={title:"admin/editor.productSummary.title",description:"admin/editor.productSummary.description"},G.mapCatalogProductToProductSummary=h.b;t.default=G},19:function(e,t,n){"use strict";function r(e){if(e&&0!==e.length){var t=e.find((function(e){return e.sellerDefault}));return t||e[0]}}n.d(t,"a",(function(){return r}))},21:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.product-list-context@0.x/ProductListContext"]},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return x}));var r=n(10),i=n(37),o=n(19),a=new RegExp(/.+ids\/(\d+)/),u=new RegExp(/http:\/\//);function c(e,t,n){if(!e.includes("/arquivos/ids/"))return e;var r=function(e){var t,n,r,i,o=a.exec(e),u=(n="v",null===(i=null!==(r=null==(t=e)?void 0:t.split("".concat(n,"="))[1])&&void 0!==r?r:"")||void 0===i?void 0:i.split("&")[0]);return o&&o.length>0?{cleanUrl:o[0],vParam:u}:{cleanUrl:e}}(e),i=r.vParam,o=r.cleanUrl;return i?"".concat(o,"-").concat(t,"-").concat(n,"?v=").concat(i):"".concat(o,"-").concat(t,"-").concat(n)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";if(e){"number"==typeof t&&(t=Math.min(t,3e3)),"number"==typeof n&&(n=Math.min(n,4e3));var r=c(e,t,n),i=r.includes("?")?"&":"?";return"".concat(r).concat(i,"width=").concat(t,"&height=").concat(n,"&aspect=true")}}function l(e){return e.commertialOffer.Price}function d(e){var t=e.commertialOffer.AvailableQuantity;return null!=t&&t>0}function m(e,t){var n=e.filter(v);if(0===n.length)return e[0];if(1===n.length)return n[0];var r=n.map((function(e){return function(e,t){var n=e.sellers;if(1===n.length)return n[0].commertialOffer.Price;var r=n.filter(d).map(l);return"highest"===t?r.reduce((function(e,t){return t>e?t:e})):r.reduce((function(e,t){return t<e?t:e}))}(e,t)}));return n["highest"===t?r.reduce((function(e,t,n){return t>r[e]?n:e}),0):r.reduce((function(e,t,n){return t<r[e]?n:e}),0)]}function f(e){return e.sellers.find(d)}function v(e){return e.sellers.some(d)}function p(e,t,n){var r=e.find((function(e){var n=e.itemId;return String(n)===String(t)}));return r||_(e,n)}function _(e,t){var n,r;switch(t){default:case"FIRST_AVAILABLE":return null!==(n=e.find(f))&&void 0!==n?n:e[0];case"LAST_AVAILABLE":return null!==(r=Object(i.a)(e).reverse().find(f))&&void 0!==r?r:e[e.length-1];case"PRICE_ASC":return m(e,"lowest");case"PRICE_DESC":return m(e,"highest")}}var g={imageUrl:"",imageLabel:""},E={Value:""},O={commertialOffer:{Price:0,ListPrice:0}},h=function(e,t){return s(function(e){return e.replace(u,"https://")}(e),t)};function x(e){var t,n,i,a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FIRST_AVAILABLE",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;if(!e)return null;var s,l=Object.assign({},e),d=l.items||[],m=l.properties||[],f=null!==(t=m.find((function(e){return"DefaultSKUSelected"===e.name})))&&void 0!==t?t:null;if(s=1===d.length?d[0]:f?p(d,f.values,u):_(d,u)){var v=null!==(n=Object(o.a)(null==s?void 0:s.sellers))&&void 0!==n?n:O,x=null!==(i=null==s?void 0:s.referenceId)&&void 0!==i?i:[],b=Object(r.a)(x,1),I=b[0],P=void 0===I?E:I,y=null!==(a=null==s?void 0:s.images)&&void 0!==a?a:[],C=y.map((function(e){return Object.assign(Object.assign({},e),{imageUrl:h(e.imageUrl,c)})})),N=Object(r.a)(C,1),S=N[0],R=void 0===S?g:S;l.sku=Object.assign(Object.assign({},s),{seller:v,referenceId:P,image:R,images:C})}return l}},29:function(e,t){e.exports=ReactApollo},32:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.native-types@0.x/IOMessage"]},38:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.product-context@0.x/useProduct"]},39:function(e,t,n){"use strict";t.a=function(e,t,n){var r;return!!(null===(r=null==e?void 0:e.advertisement)||void 0===r?void 0:r.adId)&&t===n}},44:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=i.a.createContext(void 0),a=o.Consumer;o.Consumer=function(e){return console.error("If you are seeing this, a component it's using ProductSummaryContext from vtex.product-summary, which is deprecated. Please see the issue https://github.com/vtex-apps/store-issues#28 on how to migrate to the new component."),i.a.createElement(a,e)},t.default=o},5:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.css-handles@1.x/useCssHandles"]},58:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.on-view@1.x/useOnView"]},59:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.product-context@0.x/ProductContextProvider"]},6:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.product-summary-context@0.x/ProductSummaryContext"]},60:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.store-resources@0.x/QueryItemsWithSimulation"]},61:function(e,t){e.exports=__RENDER_8_COMPONENTS__["vtex.product-context@0.x/useProductDispatch"]},7:function(e,t){e.exports=Classnames},8:function(e,t){e.exports=__RENDER_8_RUNTIME__},85:function(e,t,n){"use strict";n.r(t),function(e){var t=n(4);n.p=Object(t.getPublicPath)("vtex.product-summary@2.89.0");var r=Object(t.register)((function(){return n(105)}),e,"vtex.product-summary@2.89.0","vtex.product-summary@2.x","ProductSummaryCustom");r.renderHotReload,r.setupHMR}.call(this,n(12)(e))}},[[85,"common"]]]);